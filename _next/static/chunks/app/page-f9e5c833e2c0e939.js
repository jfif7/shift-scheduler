(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7174:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ea});var r=s(5155),n=s(2115),a=s(2473),i=s(9434);function l(e){let{className:t,...s}=e;return(0,r.jsx)(a.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)(a.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)(a.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)(a.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",t),...s})}var u=s(9074),h=s(381);function m(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function x(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function p(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",t),...s})}function g(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",t),...s})}var f=s(9708),v=s(2085);let b=(0,v.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function y(e){let{className:t,variant:s,size:n,asChild:a=!1,...l}=e,o=a?f.DX:"button";return(0,r.jsx)(o,{"data-slot":"button",className:(0,i.cn)(b({variant:s,size:n,className:t})),...l})}var j=s(9409),N=s(4616),w=s(646),S=s(9428),k=s(2525);let D=(e,t)=>e<0||e>11||!t?0:new Date(t,e+1,0).getDate(),C=(e,t)=>e<0||e>11?"":t("months.".concat(e))||"",E=(e,t)=>new Date(t,e,1).getDay(),P=(e,t,s)=>{let r=new Date(s,t,e).getDay();return 0===r||6===r};var R=s(6671),A=s(7652);let z=e=>{let{schedules:t,activeScheduleId:s,onScheduleSelect:a,onScheduleAdd:i,onScheduleDelete:l}=e,[o,d]=(0,n.useState)(!1),[c,h]=(0,n.useState)(null),[f,v]=(0,n.useState)(null),[b,D]=(0,n.useState)("auto"),E=(0,A.c3)(),P=s&&!o,z=new Date,M=z.getMonth(),I=z.getFullYear(),F=()=>{if(0===t.length)return null;let e=t[0];for(let s=1;s<t.length;s++){let r=t[s];(r.year>e.year||r.year===e.year&&r.month>e.month)&&(e=r)}return e},_=()=>{let e=F();if(!e)return{month:M,year:I};let t=new Date(e.year,e.month),s=new Date(t.getFullYear(),t.getMonth()+1);return{month:s.getMonth(),year:s.getFullYear()}},H=(e,t,s)=>{l(e),R.oR.success(E("toast.scheduleDeleted"),{description:E("toast.scheduleDeletedDescription",{month:C(t,E),year:s})})},W=[...t].sort((e,t)=>t.year-e.year||t.month-e.month),L=Array.from({length:12},(e,t)=>({value:t.toString(),label:E("months.".concat(t))})),O=Array.from({length:10},(e,t)=>{let s=z.getFullYear()-2+t;return{value:s.toString(),label:s.toString()}});return(0,r.jsxs)(m,{children:[(0,r.jsxs)(x,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(p,{className:"flex items-center gap-2",children:[(0,r.jsx)(u.A,{className:"w-5 h-5"}),E("scheduleHistory.title"),P&&s&&(0,r.jsxs)("span",{className:"text-sm font-normal text-muted-foreground",children:["-"," ",(()=>{let e=t.find(e=>e.id===s);return e?"".concat(C(e.month,E)," ").concat(e.year):""})()]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[P&&(0,r.jsx)(y,{variant:"ghost",size:"sm",onClick:()=>a(null),className:"flex items-center gap-2",children:E("scheduleHistory.showAll")}),(0,r.jsxs)(y,{onClick:()=>{let{month:e,year:t}=_();d(!0),h(e),v(t),D("auto")},size:"sm",className:"flex items-center gap-2",children:[(0,r.jsx)(N.A,{className:"w-4 h-4"}),E("scheduleHistory.addSchedule")]})]})]}),0===t.length&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:E("scheduleHistory.noSchedulesYet")})]}),!P&&(0,r.jsxs)(g,{className:"space-y-4",children:[o&&(0,r.jsxs)("div",{className:"p-4 border rounded-lg bg-muted/50 space-y-4",children:[(0,r.jsx)("h4",{className:"font-medium",children:E("scheduleHistory.createNewSchedule")}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:E("scheduleHistory.month")}),(0,r.jsxs)(j.l6,{value:(null==c?void 0:c.toString())||"",onValueChange:e=>h(parseInt(e)),children:[(0,r.jsx)(j.bq,{children:(0,r.jsx)(j.yv,{placeholder:E("scheduleHistory.selectMonth")})}),(0,r.jsx)(j.gC,{children:L.map(e=>(0,r.jsx)(j.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:E("scheduleHistory.year")}),(0,r.jsxs)(j.l6,{value:(null==f?void 0:f.toString())||"",onValueChange:e=>v(parseInt(e)),children:[(0,r.jsx)(j.bq,{children:(0,r.jsx)(j.yv,{placeholder:E("scheduleHistory.selectYear")})}),(0,r.jsx)(j.gC,{children:O.map(e=>(0,r.jsx)(j.eb,{value:e.value,children:e.label},e.value))})]})]})]}),t.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:E("scheduleHistory.employeeImport")}),(0,r.jsxs)(j.l6,{value:b,onValueChange:D,children:[(0,r.jsx)(j.bq,{children:(0,r.jsx)(j.yv,{placeholder:E("scheduleHistory.chooseImportOption")})}),(0,r.jsxs)(j.gC,{children:[(0,r.jsx)(j.eb,{value:"auto",children:E("scheduleHistory.autoImportFromRecent")}),(0,r.jsx)(j.eb,{value:"none",children:E("scheduleHistory.startWithEmptyList")}),W.map(e=>(0,r.jsxs)(j.eb,{value:e.id,children:[E("scheduleHistory.copyFrom")," ",C(e.month,E)," ",e.year," (",e.employees.length," ",E("scheduleHistory.employees"),")"]},e.id))]})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:E("scheduleHistory.importNote")})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(y,{onClick:()=>{if(!c||!f)return void R.oR.error(E("toast.invalidInput"),{description:E("toast.selectBothMonthYear")});try{let e;if("auto"===b){let t=F();e=null==t?void 0:t.id}else"none"!==b&&(e=b);i(c,f,e),d(!1),h(null),v(null),D("auto");let t=e?E("toast.withImportedEmployees"):E("toast.withEmptyEmployeeList");R.oR.success(E("toast.scheduleCreated"),{description:E("toast.scheduleCreatedDescription",{month:C(c,E),year:f,importMessage:t})})}catch(e){R.oR.error(E("toast.creationFailed"),{description:e instanceof Error?e.message:E("toast.creationFailedDescription")})}},size:"sm",children:E("scheduleHistory.createSchedule")}),(0,r.jsx)(y,{variant:"outline",onClick:()=>{d(!1),h(null),v(null),D("auto")},size:"sm",children:E("scheduleHistory.cancel")})]})]}),W.length>0&&(0,r.jsx)("div",{className:"space-y-2",children:W.map(e=>(0,r.jsxs)("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors ".concat(e.id===s?"bg-primary/10 border-primary":"hover:bg-muted/50"),onClick:()=>{e.id===s?a(null):a(e.id)},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.isGenerated?(0,r.jsx)(w.A,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(S.A,{className:"w-4 h-4 text-muted-foreground"}),(0,r.jsxs)("span",{className:"font-medium",children:[C(e.month,E)," ",e.year]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.employees.length," ",E("scheduleHistory.employees")]}),(0,r.jsx)(y,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),H(e.id,e.month,e.year)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive hover:bg-destructive/10",children:(0,r.jsx)(k.A,{className:"w-3 h-3"})})]})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[E("scheduleHistory.created")," ",e.createdAt.toLocaleDateString(),e.isGenerated&&(0,r.jsxs)("span",{className:"ml-2 text-green-600",children:["â€¢ ",E("scheduleHistory.generated")]})]})]},e.id))})]})]})};function M(e){let{className:t,type:s,...n}=e;return(0,r.jsx)("input",{type:s,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var I=s(968);function F(e){let{className:t,...s}=e;return(0,r.jsx)(I.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}let _=(0,v.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function H(e){let{className:t,variant:s,asChild:n=!1,...a}=e,l=n?f.DX:"span";return(0,r.jsx)(l,{"data-slot":"badge",className:(0,i.cn)(_({variant:s}),t),...a})}let W=e=>{let{employees:t,selectedEmployee:s,onEmployeeSelect:a,onAddEmployee:i,onRemoveEmployee:l,onUpdateEmployee:o,onToggleTag:d,predefinedTags:c,hasActiveSchedule:u}=e,[h,f]=(0,n.useState)(""),[v,b]=(0,n.useState)(""),[j,w]=(0,n.useState)(0),S=(0,A.c3)(),D=e=>{f(e.id),b(e.name),w(e.shiftsPerMonth)},C=()=>{o(h,{name:v,shiftsPerMonth:j}),f("")},E=()=>{f(""),b(""),w(0)};return(0,r.jsxs)(m,{className:"flex flex-col h-[600px]",children:[(0,r.jsxs)(x,{className:"flex-shrink-0",children:[(0,r.jsx)(p,{children:S("employees.title")}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:u?S("employees.selectScheduleDescription"):S("employees.noActiveScheduleDescription")})]}),(0,r.jsx)(g,{className:"flex-1 flex flex-col overflow-hidden",children:u?0===t.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:S("employees.noEmployeesMessage")}),(0,r.jsxs)(y,{onClick:i,children:[(0,r.jsx)(N.A,{className:"w-4 h-4 mr-2"}),S("employees.addFirstEmployee")]})]}):(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,r.jsx)("div",{className:"flex-1 space-y-3 overflow-y-auto pr-2",children:t.map(e=>(0,r.jsx)("div",{className:"border rounded-lg transition-colors ".concat(s===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:h===e.id?(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(F,{htmlFor:"editName",children:S("employees.name")}),(0,r.jsx)(M,{id:"editName",value:v,onChange:e=>b(e.target.value),placeholder:S("employees.namePlaceholder")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(F,{htmlFor:"editShifts",children:S("employees.shiftsPerMonth")}),(0,r.jsx)(M,{id:"editShifts",type:"number",min:"1",max:"31",value:j,onChange:e=>w(Number.parseInt(e.target.value)||0)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(F,{children:S("employees.tags")}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:c.map(t=>{let s=e.tags.includes(t);return(0,r.jsx)(y,{variant:s?"default":"outline",size:"sm",onClick:()=>d(e.id,t),children:S(t)},t)})})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(y,{onClick:C,size:"sm",children:S("employees.save")}),(0,r.jsx)(y,{onClick:E,variant:"outline",size:"sm",children:S("employees.cancel")}),(0,r.jsxs)(y,{onClick:()=>{l(e.id),f("")},variant:"destructive",size:"sm",children:[(0,r.jsx)(k.A,{className:"w-4 h-4 mr-1"}),S("employees.delete")]})]})]}):(0,r.jsx)("div",{className:"p-3 cursor-pointer",onClick:()=>a(s===e.id?"":e.id),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium",children:e.name}),(0,r.jsxs)(H,{variant:"secondary",children:[e.shiftsPerMonth," ",S("employees.shifts")]})]}),e.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.tags.map(e=>(0,r.jsx)(H,{variant:"outline",className:"text-xs",children:S(e)},S(e)))}),s===e.id&&(0,r.jsx)("div",{className:"mt-2 text-xs text-blue-600",children:S("employees.selectedDescription")})]}),(0,r.jsx)(y,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),D(e)},children:S("employees.edit")})]})})},e.id))}),u&&(0,r.jsxs)(y,{onClick:i,variant:"outline",className:"w-full mt-3 flex-shrink-0",children:[(0,r.jsx)(N.A,{className:"w-4 h-4 mr-2"}),S("employees.addEmployee")]})]}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:S("employees.noActiveScheduleMessage")})})})]})},L=e=>{let{settings:t,onSettingsChange:s}=e,n=(0,A.c3)(),a=(e,r)=>{s({...t,[e]:r})};return(0,r.jsxs)(m,{children:[(0,r.jsxs)(x,{children:[(0,r.jsx)(p,{children:n("constraints.title")}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:n("constraints.description")})]}),(0,r.jsxs)(g,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"shiftsPerDay",children:n("constraints.shiftsPerDay")}),(0,r.jsx)(M,{id:"shiftsPerDay",type:"number",min:"1",max:"3",value:t.shiftsPerDay,onChange:e=>a("shiftsPerDay",Number.parseInt(e.target.value)||1)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n("constraints.shiftsPerDayDescription")})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"personsPerShift",children:n("constraints.personsPerShift")}),(0,r.jsx)(M,{id:"personsPerShift",type:"number",min:"1",max:"10",value:t.personsPerShift,onChange:e=>a("personsPerShift",Number.parseInt(e.target.value)||1)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n("constraints.personsPerShiftDescription")})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"maxConsecutive",children:n("constraints.maxConsecutiveShifts")}),(0,r.jsx)(M,{id:"maxConsecutive",type:"number",min:"1",max:"7",value:t.maxConsecutiveShifts,onChange:e=>a("maxConsecutiveShifts",Number.parseInt(e.target.value)||1)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n("constraints.maxConsecutiveShiftsDescription")})]})]}),(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:n("constraints.restAndRecovery")}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"minRestDays",children:n("constraints.minRestDaysBetweenShifts")}),(0,r.jsx)(M,{id:"minRestDays",type:"number",min:"0",max:"3",value:t.minRestDaysBetweenShifts,onChange:e=>a("minRestDaysBetweenShifts",Number.parseInt(e.target.value)||0)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n("constraints.minRestDaysBetweenShiftsDescription")})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(F,{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:t.weekendCoverageRequired,onChange:e=>a("weekendCoverageRequired",e.target.checked),className:"rounded"}),n("constraints.weekendCoverageRequired")]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n("constraints.weekendCoverageRequiredDescription")})]})]})]}),(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:n("constraints.weeklyLimits")}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"minShiftsPerWeek",children:n("constraints.minShiftsPerWeek")}),(0,r.jsx)(M,{id:"minShiftsPerWeek",type:"number",min:"0",max:"7",value:t.minShiftsPerWeek,onChange:e=>a("minShiftsPerWeek",Number.parseInt(e.target.value)||0)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n("constraints.minShiftsPerWeekDescription")})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(F,{htmlFor:"maxShiftsPerWeek",children:n("constraints.maxShiftsPerWeek")}),(0,r.jsx)(M,{id:"maxShiftsPerWeek",type:"number",min:"1",max:"7",value:t.maxShiftsPerWeek,onChange:e=>a("maxShiftsPerWeek",Number.parseInt(e.target.value)||1)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n("constraints.maxShiftsPerWeekDescription")})]})]})]}),(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:n("constraints.fairnessAndDistribution")}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(F,{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:t.evenDistribution,onChange:e=>a("evenDistribution",e.target.checked),className:"rounded"}),n("constraints.evenShiftDistribution")]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n("constraints.evenShiftDistributionDescription")})]})})]}),(0,r.jsxs)("div",{className:"border-t pt-6 bg-muted/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:n("constraints.constraintSummary")}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[n("constraints.daily"),":"]})," ",t.shiftsPerDay," ",n("constraints.shifts"),","," ",t.personsPerShift," ",n("constraints.persons")," ",n("constraints.each")]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[n("constraints.consecutive"),":"]})," ",n("constraints.max")," ",t.maxConsecutiveShifts," ",n("constraints.inARow")]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[n("constraints.rest"),":"]})," ",t.minRestDaysBetweenShifts," ",n("constraints.dayMinimum")]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[n("constraints.weekly"),":"]})," ",t.minShiftsPerWeek,"-",t.maxShiftsPerWeek," ",n("constraints.shiftsPerPerson")]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[n("constraints.weekend"),":"]})," ",n(t.weekendCoverageRequired?"constraints.required":"constraints.optional")]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[n("constraints.distribution"),":"]})," ",n(t.evenDistribution?"constraints.even":"constraints.flexible")]})]})]})]})]})]})};var O=s(6474),T=s(4261),U=s(2118);let B=(e,t,s,r,n)=>{let a=D(s,r),i="Date,Employee\n";for(let n=1;n<=a;n++){let a=e[n]||[];a.length>0?a.forEach(e=>{let a=t.find(t=>t.id===e);i+="".concat(r,"-").concat((s+1).toString().padStart(2,"0"),"-").concat(n.toString().padStart(2,"0"),",").concat((null==a?void 0:a.name)||"Unknown","\n")}):i+="".concat(r,"-").concat((s+1).toString().padStart(2,"0"),"-").concat(n.toString().padStart(2,"0"),",No Assignment\n")}let l=new Blob([i],{type:"text/csv"}),o=window.URL.createObjectURL(l),d=document.createElement("a");d.href=o,d.download="schedule-".concat(C(s,n),"-").concat(r,".csv"),d.click(),window.URL.revokeObjectURL(o)},q=(e,t,s,r,n)=>{let a=document.createElement("canvas"),i=a.getContext("2d");if(!i)return;let l=D(s,r);a.width=840,a.height=60+40*Math.ceil(l/7),i.fillStyle="#ffffff",i.fillRect(0,0,a.width,a.height),i.fillStyle="#000000",i.font="bold 24px Arial",i.textAlign="center",i.fillText("".concat(C(s,n)," ").concat(r," Schedule"),a.width/2,30),i.font="14px Arial",i.textAlign="left";for(let s=1;s<=l;s++){let r=Math.floor((s-1)/7),n=(s-1)%7*120,a=60+40*r;i.strokeStyle="#cccccc",i.strokeRect(n,a,120,40),i.fillStyle="#000000",i.fillText(s.toString(),n+5,a+20);let l=e[s]||[];if(l.length>0){let e=t.find(e=>e.id===l[0]);i.fillStyle="#0066cc",i.fillText((null==e?void 0:e.name)||"Unknown",n+5,a+35)}}a.toBlob(e=>{if(e){let t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="schedule-".concat(C(s,n),"-").concat(r,".png"),a.click(),window.URL.revokeObjectURL(t)}})},G=e=>{var t;let{schedule:s,employees:a,selectedMonth:i,selectedYear:l,hasActiveSchedule:o,constraints:d=[],selectedEmployee:c,onSetConstraint:u,onRemoveConstraint:h,onGenerateSchedule:f,isGenerating:v=!1}=e,[b,j]=(0,n.useState)(!1),N=(0,n.useRef)(null),w=(0,A.c3)();(0,n.useEffect)(()=>{let e=e=>{N.current&&!N.current.contains(e.target)&&j(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let S=e=>{if(!c||!u||!h)return;let t=d.find(t=>t.employeeId===c&&t.date===e);t?"prefer"===t.type?u(c,"avoid",e):"avoid"===t.type&&h(c,e):u(c,"prefer",e)};return(0,r.jsxs)(m,{children:[(0,r.jsxs)(x,{children:[(0,r.jsxs)(p,{className:"flex items-center justify-between",children:[w("schedule.title"),(0,r.jsxs)("div",{className:"flex gap-2",children:[f&&(0,r.jsx)(y,{onClick:f,disabled:0===a.length||v,size:"sm",children:v?w("schedule.generating"):w("schedule.generateButton")}),Object.keys(s).length>0&&(0,r.jsxs)("div",{className:"relative",ref:N,children:[(0,r.jsxs)(y,{variant:"outline",size:"sm",onClick:()=>j(!b),className:"flex items-center gap-2",children:[w("schedule.export"),(0,r.jsx)(O.A,{className:"w-4 h-4"})]}),b&&(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:[(0,r.jsxs)("button",{onClick:()=>{if(0===Object.keys(s).length)return void R.oR.error(w("toast.noSchedule"),{description:w("toast.pleaseGenerateFirst")});try{B(s,a,i,l,w),R.oR.success(w("toast.csvExported"),{description:w("toast.csvExportedDescription")})}catch(e){R.oR.error(w("toast.exportFailed"),{description:w("toast.csvExportFailedDescription")})}j(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(T.A,{className:"w-4 h-4"}),w("schedule.exportCSV")]}),(0,r.jsxs)("button",{onClick:()=>{if(0===Object.keys(s).length)return void R.oR.error(w("toast.noSchedule"),{description:w("toast.pleaseGenerateFirst")});try{q(s,a,i,l,w),R.oR.success(w("toast.imageExported"),{description:w("toast.imageExportedDescription")})}catch(e){R.oR.error(w("toast.exportFailed"),{description:w("toast.imageExportFailedDescription")})}j(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(U.A,{className:"w-4 h-4"}),w("schedule.exportImage")]})]})]})]})]}),c&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[w("schedule.settingPreferencesFor")," ",(0,r.jsx)("strong",{children:null==(t=a.find(e=>e.id===c))?void 0:t.name})]})]}),(0,r.jsxs)(g,{children:[!o&&(0,r.jsx)("p",{className:"text-muted-foreground",children:w("schedule.noActiveSchedule")}),o&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-4",children:w("schedule.monthSchedule",{month:C(i,w),year:l})}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[[w("days.0"),w("days.1"),w("days.2"),w("days.3"),w("days.4"),w("days.5"),w("days.6")].map(e=>(0,r.jsx)("div",{className:"p-2 text-center font-medium bg-muted rounded",children:e},e)),(()=>{if(!i||!l)return null;let e=E(i,l),t=D(i,l),n=[];for(let t=0;t<e;t++)n.push((0,r.jsx)("div",{className:"p-2 h-16"},"empty-".concat(t)));for(let e=1;e<=t;e++){let t=s[e]||[],i=c?d.find(t=>t.employeeId===c&&t.date===e):null,l=c&&t.includes(c),o="p-2 h-16 border rounded-lg ";c&&(o+="cursor-pointer transition-colors ",l?(null==i?void 0:i.type)==="prefer"?o+="bg-green-200 border-green-400 hover:bg-green-300 ring-2 ring-blue-400":(null==i?void 0:i.type)==="avoid"?o+="bg-red-200 border-red-400 hover:bg-red-300 ring-2 ring-blue-400":o+="bg-blue-100 border-blue-400 hover:bg-blue-200 ring-2 ring-blue-400":(null==i?void 0:i.type)==="prefer"?o+="bg-green-100 border-green-300 hover:bg-green-200":(null==i?void 0:i.type)==="avoid"?o+="bg-red-100 border-red-300 hover:bg-red-200":o+="hover:border-blue-300 hover:bg-blue-50"),n.push((0,r.jsxs)("div",{className:o,onClick:()=>c&&S(e),children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:e}),t.map(e=>{let t=a.find(t=>t.id===e),s=c===e;return(0,r.jsx)("div",{className:"text-xs truncate ".concat(s?"text-blue-800 font-semibold bg-blue-50 rounded border border-blue-200":"text-blue-600"),title:null==t?void 0:t.name,children:null==t?void 0:t.name},e)})]},e))}return n})()]}),c&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-blue-800 mb-2",children:w("schedule.clickToSetPreferences")}),(0,r.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded"}),(0,r.jsx)("span",{children:w("schedule.preferredDays")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-red-100 border border-red-300 rounded"}),(0,r.jsx)("span",{children:w("schedule.avoidDays")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-white border border-gray-300 rounded"}),(0,r.jsx)("span",{children:w("schedule.normalDays")})]})]})]})]})]})]})},V={shiftsPerDay:1,personsPerShift:1,maxConsecutiveShifts:3,minRestDaysBetweenShifts:0,weekendCoverageRequired:!0,maxShiftsPerWeek:5,minShiftsPerWeek:1,evenDistribution:!0},Y=()=>{let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(null),[a,i]=(0,n.useState)(V);(0,n.useEffect)(()=>{o()},[]);let l=(0,n.useCallback)(()=>{localStorage.setItem("scheduleData",JSON.stringify({schedules:e,activeScheduleId:s,settings:a}))},[e,s,a]);(0,n.useEffect)(()=>{l()},[l]);let o=()=>{let e=localStorage.getItem("scheduleData");if(e)try{let s=JSON.parse(e);t((s.schedules||[]).map(e=>({...e,createdAt:new Date(e.createdAt)}))),r(s.activeScheduleId||null),i({...V,...s.settings})}catch(e){console.error("Error loading from localStorage:",e)}},d=(e,s)=>{t(t=>t.map(t=>t.id===e?{...t,...s}:t))},c=()=>e.find(e=>e.id===s)||null,u=c(),h=(null==u?void 0:u.month)||0,m=(null==u?void 0:u.year)||0,x=(null==u?void 0:u.employees)||[],p=(null==u?void 0:u.constraints)||[];return{schedules:e,activeScheduleId:s,setActiveScheduleId:r,addSchedule:(s,n,a)=>{if(e.some(e=>e.month===s&&e.year===n))throw Error("Schedule for ".concat(s,"/").concat(n," already exists"));let i=[];if(a){let t=e.find(e=>e.id===a);t&&t.employees.length>0&&(i=t.employees.map(e=>({...e,id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,11))})))}let l={id:Date.now().toString(),month:s,year:n,employees:i,constraints:[],schedule:{},createdAt:new Date,isGenerated:!1};return t(e=>[...e,l]),r(l.id),l.id},deleteSchedule:e=>{t(t=>t.filter(t=>t.id!==e)),s===e&&r(null)},updateSchedule:d,getActiveSchedule:c,selectedMonth:h,selectedYear:m,employees:x,setEmployees:e=>{s&&d(s,{employees:e})},constraints:p,setConstraints:e=>{s&&d(s,{constraints:e})},schedule:(null==u?void 0:u.schedule)||{},setSchedule:e=>{s&&d(s,{schedule:e,isGenerated:Object.keys(e).length>0})},settings:a,setSettings:i}},J=(e,t,s,r,n,a,i)=>({addEmployee:()=>{let s=i?i("employees.newEmployee"):"New Employee",r=e.filter(e=>e.name.startsWith("".concat(s," "))).map(e=>{let t=e.name.match(new RegExp("".concat(s," (\\d+)")));return t?Number.parseInt(t[1]):0}),n=(r.length>0?Math.max(...r)+1:1).toString().padStart(3,"0"),a={id:Date.now().toString(),name:"".concat(s," ").concat(n),shiftsPerMonth:8,tags:[]};t([...e,a]),i?R.oR.success(i("toast.employeeAdded"),{description:i("toast.employeeAddedDescription",{name:a.name})}):R.oR.success("Employee added",{description:"".concat(a.name," has been added to the schedule.")})},removeEmployee:i=>{t(e.filter(e=>e.id!==i)),r(s.filter(e=>e.employeeId!==i));let l={...n};Object.keys(l).forEach(e=>{l[Number.parseInt(e)]=l[Number.parseInt(e)].filter(e=>e!==i)}),a(l)},updateEmployee:(s,r)=>{t(e.map(e=>e.id===s?{...e,...r}:e)),i?R.oR.success(i("toast.employeeUpdated"),{description:i("toast.employeeUpdatedDescription")}):R.oR.success("Employee updated",{description:"Employee information has been saved."})},toggleEmployeeTag:(s,r)=>{t(e.map(e=>{if(e.id===s){let t=e.tags.includes(r);return{...e,tags:t?e.tags.filter(e=>e!==r):[...e.tags,r]}}return e}))}}),X=(e,t)=>({getConstraintsForEmployee:t=>e.filter(e=>e.employeeId===t),getConstraintForDate:(t,s)=>e.find(e=>e.employeeId===t&&e.date===s),removeConstraint:(s,r)=>{t(e.filter(e=>e.employeeId!==s||e.date!==r))},setConstraint:(s,r,n)=>{t([...e.filter(e=>e.employeeId!==s||e.date!==n),{id:Date.now().toString(),employeeId:s,type:r,date:n}])}});var Q=s(2764),Z=s.n(Q);let $=e=>Math.floor(Math.random()*e),K=(e,t,s,r)=>{let{shiftsPerDay:n,personsPerShift:a}=s;if(e.length<r*n*a)throw Error("Not enough slots in optimized schedule");let i={},l=0;for(let s=1;s<=r;s++){i[s]=[];for(let r=0;r<n;r++)for(let r=0;r<a;r++){let r=e[l];if(r>=0&&r<t.length)i[s].push(t[r].id),l++;else throw Error("Invalid employee index ".concat(r," in optimized schedule"))}}return i},ee=e=>{let t=[];e.forEach((e,s)=>{for(let r=0;r<e.shiftsPerMonth;r++)t.push(s)});for(let e=t.length-1;e>0;e--){let s=$(e+1);[t[e],t[s]]=[t[s],t[e]]}return t},et=(e,t,s,r,n,a,i)=>{let l=0,{shiftsPerDay:o,personsPerShift:d}=r,c=n*o*d,u=Array(t.length).fill(0),h=t.map(()=>({current:0,max:0})),m=Array(t.length).fill(0),x=Array(t.length).fill(0),p=t.map(()=>({current:0,max:0})),g=e.slice(0,c);if(g.length<c)throw Error("Optimized schedule does not have enough slots: expected ".concat(c,", got ").concat(g.length));g.forEach(e=>{if(e<-1||e>=t.length)throw Error("Invalid employee index ".concat(e," in optimized schedule"))});for(let e=0;e<n;e++){let r=e+1,n=e*o*d,c=n+o*d,f=g.slice(n,c);for(let e=0;e<o;e++){let t=n+e*d,s=t+d;new Set(g.slice(t,s)).size<d&&(l+=2e3)}let v=P(r,a,i);s.forEach(e=>{if("avoid"===e.type&&e.date===r){let s=t.findIndex(t=>t.id===e.employeeId);-1!==s&&f.includes(s)&&(l+=1e3)}if("prefer"===e.type&&e.date===r){let s=t.findIndex(t=>t.id===e.employeeId);-1===s||f.includes(s)||(l+=10)}});let b=[...new Set(f)];b.forEach(s=>{var r;if(u[s]++,v?m[s]++:x[s]++,e>0){let t=(e-1)*o*d,r=e*o*d,n=!1;for(let e=t;e<r;e++)if(g[e]===s){n=!0;break}n?h[s].current++:h[s].current=1}else h[s].current=1;if(h[s].max=Math.max(h[s].max,h[s].current),v&&(null==(r=t[s])?void 0:r.tags.includes("tags.weekendType"))){if(e>0){let t=P(e,a,i),r=(e-1)*o*d,n=e*o*d,l=!1;if(t){for(let e=r;e<Math.min(n,g.length);e++)if(g[e]===s){l=!0;break}}l?p[s].current++:p[s].current=1}else p[s].current=1;p[s].max=Math.max(p[s].max,p[s].current)}else p[s].current=0}),t.forEach((e,t)=>{b.includes(t)||(h[t].current=0,p[t].current=0)})}t.forEach((e,t)=>{let s=0;h[t].max>r.maxConsecutiveShifts&&(s+=(h[t].max-r.maxConsecutiveShifts)*100),e.tags.includes("tags.weekendType")&&(p[t].max>=2?s=0:s+=50),l+=s});for(let e=0;e<Math.ceil(n/7);e++){let s=7*e,a=Math.min(s+6,n-1);t.forEach((e,t)=>{let n=0,i=[];for(let e=s;e<=a;e++){let s=e*o*d,r=Math.min((e+1)*o*d,g.length),a=!1;for(let e=s;e<r;e++)if(g[e]===t){a=!0;break}a&&(n++,i.push(e))}n>r.maxShiftsPerWeek&&(l+=(n-r.maxShiftsPerWeek)*100);for(let e=0;e<i.length-1;e++){let t=i[e+1]-i[e]-1;t<r.minRestDaysBetweenShifts&&(l+=(r.minRestDaysBetweenShifts-t)*80)}})}if(r.evenDistribution){let e=u.reduce((e,t)=>e+t,0)/u.length,t=u.reduce((t,s)=>t+Math.pow(s-e,2),0)/u.length;l+=50*t}let f=m.reduce((e,t)=>e+t,0),v=x.reduce((e,t)=>e+t,0);return f>0&&v>0&&t.forEach((e,t)=>{let s=u[t];if(s>0){let e=Math.abs(m[t]/s-f/(f+v));m[t]>0&&0===x[t]&&s>1?l+=2e3:x[t]>0&&0===m[t]&&s>1?l+=1e3:e>.3&&(l+=1e3*e)}}),console.log("Cost calculated: ".concat(l)),l},es=e=>{let t=[...e];if(t.length<2)return t;let s=["swap","move","reverse","transport"],r=s[$(s.length)],n=$(t.length),a=$(t.length);switch(r){case"swap":[t[n],t[a]]=[t[a],t[n]];break;case"move":{let e=t.splice(n,1)[0];t.splice(a,0,e);break}case"reverse":{let e=Math.min(n,a),s=Math.max(n,a);for(;e<s;)[t[e],t[s]]=[t[s],t[e]],e++,s--;break}case"transport":{if(t.length<3)break;let e=Math.min(n,a),s=Math.max(n,a);if(e<s){let r=t.splice(e,s-e+1),n=$(t.length);t.splice(n,0,...r)}}}return t},er=(e,t,s,r,n)=>{if(0===e.length)return{schedule:{},success:!1,message:"Please add employees before generating a schedule."};let a=D(r,n),i=a*s.shiftsPerDay*s.personsPerShift,l=e.reduce((e,t)=>e+t.shiftsPerMonth,0);if(l<i)return{schedule:{},success:!1,message:"Need ".concat(i," total shifts, but only ").concat(l," available.")};let o=ee(e);try{console.log("Starting optimized simulated annealing with ".concat(e.length," employees, ").concat(a," days"));let i=Date.now(),l=Z()({initialState:o,tempMax:1e3,tempMin:.1,newState:e=>es(e),getTemp:e=>.99*e,getEnergy:i=>et(i,e,t,s,a,r,n)}),d=Date.now();console.log("Simulated annealing completed in ".concat(d-i,"ms"));let c=K(l,e,s,a),u=et(l,e,t,s,a,r,n),h=0===u?"Perfect schedule generated with all constraints satisfied!":"Schedule generated with optimization score: ".concat(Math.round(Math.max(0,u)));return{schedule:c,success:!0,message:h}}catch(e){return console.error("Simulated annealing failed:",e),{schedule:{},success:!1,message:"Simulated annealing failed."}}},en=()=>{let[e,t]=(0,n.useState)(!1);return{isGenerating:e,handleGenerateSchedule:async(e,s,r,n,a,i)=>{t(!0);try{await new Promise(e=>setTimeout(e,500));let t=er(e,s,r,n,a);t.success?(i(t.schedule),R.oR.success("Schedule generated",{description:t.message})):R.oR.error("Generation failed",{description:t.message})}catch(e){R.oR.error("Generation error",{description:"An unexpected error occurred while generating the schedule."})}finally{t(!1)}}}};function ea(){let e=(0,A.c3)(),{schedules:t,activeScheduleId:s,setActiveScheduleId:a,addSchedule:i,deleteSchedule:m,selectedMonth:x,selectedYear:p,employees:g,setEmployees:f,constraints:v,setConstraints:b,schedule:y,setSchedule:j,settings:N,setSettings:w}=Y(),{addEmployee:S,removeEmployee:k,updateEmployee:D,toggleEmployeeTag:C}=J(g,f,v,b,y,j,e),{setConstraint:E,removeConstraint:P}=X(v,b),{isGenerating:R,handleGenerateSchedule:M}=en(),[I,F]=(0,n.useState)("");return(0,r.jsxs)("div",{className:"container mx-auto p-6 max-w-6xl",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Schedule Manager"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage employee schedules with constraints and preferences"})]}),(0,r.jsxs)(l,{defaultValue:"setup",className:"space-y-6",children:[(0,r.jsxs)(o,{className:"grid w-full grid-cols-2",children:[(0,r.jsxs)(d,{value:"setup",className:"flex items-center gap-2",children:[(0,r.jsx)(u.A,{className:"w-4 h-4"}),e("navigation.setup")]}),(0,r.jsxs)(d,{value:"constraints",className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"w-4 h-4"}),e("navigation.constraints")]})]}),(0,r.jsx)(c,{value:"setup",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(z,{schedules:t,activeScheduleId:s,onScheduleSelect:a,onScheduleAdd:i,onScheduleDelete:m}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[(0,r.jsx)(W,{employees:g,selectedEmployee:I,onEmployeeSelect:F,onAddEmployee:S,onRemoveEmployee:k,onUpdateEmployee:D,onToggleTag:C,predefinedTags:["tags.weekendType","tags.burger","tags.morningShift","tags.eveningShift","tags.manager","tags.partTime"],hasActiveSchedule:null!==s}),(0,r.jsx)("div",{className:"xl:col-span-2",children:(0,r.jsx)(G,{schedule:y,employees:g,selectedMonth:x,selectedYear:p,hasActiveSchedule:null!==s,constraints:v,selectedEmployee:I,onSetConstraint:E,onRemoveConstraint:P,onGenerateSchedule:()=>{M(g,v,N,x,p,j)},isGenerating:R})})]})]})}),(0,r.jsx)(c,{value:"constraints",children:(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)(L,{settings:N,onSettingsChange:w})})})]})]})}},9409:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>m,gC:()=>h,l6:()=>d,yv:()=>c});var r=s(5155);s(2115);var n=s(721),a=s(6474),i=s(5196),l=s(7863),o=s(9434);function d(e){let{...t}=e;return(0,r.jsx)(n.bL,{"data-slot":"select",...t})}function c(e){let{...t}=e;return(0,r.jsx)(n.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:s="default",children:i,...l}=e;return(0,r.jsxs)(n.l9,{"data-slot":"select-trigger","data-size":s,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[i,(0,r.jsx)(n.In,{asChild:!0,children:(0,r.jsx)(a.A,{className:"size-4 opacity-50"})})]})}function h(e){let{className:t,children:s,position:a="popper",...i}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsxs)(n.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...i,children:[(0,r.jsx)(x,{}),(0,r.jsx)(n.LM,{className:(0,o.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,r.jsx)(p,{})]})})}function m(e){let{className:t,children:s,...a}=e;return(0,r.jsxs)(n.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...a,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(i.A,{className:"size-4"})})}),(0,r.jsx)(n.p4,{children:s})]})}function x(e){let{className:t,...s}=e;return(0,r.jsx)(n.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(l.A,{className:"size-4"})})}function p(e){let{className:t,...s}=e;return(0,r.jsx)(n.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(a.A,{className:"size-4"})})}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a});var r=s(2596),n=s(9688);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,r.$)(t))}},9848:(e,t,s)=>{Promise.resolve().then(s.bind(s,7174))}},e=>{var t=t=>e(e.s=t);e.O(0,[897,794,441,684,358],()=>t(9848)),_N_E=e.O()}]);