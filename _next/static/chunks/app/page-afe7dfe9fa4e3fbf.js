(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8349:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eg});var r=s(5155),a=s(2115),n=s(2473),l=s(2596),i=s(9688);function d(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,l.$)(t))}function o(e){let{className:t,...s}=e;return(0,r.jsx)(n.bL,{"data-slot":"tabs",className:d("flex flex-col gap-2",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)(n.B8,{"data-slot":"tabs-list",className:d("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function u(e){let{className:t,...s}=e;return(0,r.jsx)(n.l9,{"data-slot":"tabs-trigger",className:d("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function m(e){let{className:t,...s}=e;return(0,r.jsx)(n.UC,{"data-slot":"tabs-content",className:d("flex-1 outline-none",t),...s})}var h=s(9074),x=s(381);function p(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:d("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function g(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:d("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function f(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:d("leading-none font-semibold",t),...s})}function v(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:d("px-6",t),...s})}var b=s(9708),j=s(2085);let y=(0,j.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function N(e){let{className:t,variant:s,size:a,asChild:n=!1,...l}=e,i=n?b.DX:"button";return(0,r.jsx)(i,{"data-slot":"button",className:d(y({variant:s,size:a,className:t})),...l})}var w=s(1918),S=s(6474),k=s(5196),C=s(7863);function E(e){let{...t}=e;return(0,r.jsx)(w.bL,{"data-slot":"select",...t})}function D(e){let{...t}=e;return(0,r.jsx)(w.WT,{"data-slot":"select-value",...t})}function M(e){let{className:t,size:s="default",children:a,...n}=e;return(0,r.jsxs)(w.l9,{"data-slot":"select-trigger","data-size":s,className:d("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[a,(0,r.jsx)(w.In,{asChild:!0,children:(0,r.jsx)(S.A,{className:"size-4 opacity-50"})})]})}function P(e){let{className:t,children:s,position:a="popper",...n}=e;return(0,r.jsx)(w.ZL,{children:(0,r.jsxs)(w.UC,{"data-slot":"select-content",className:d("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...n,children:[(0,r.jsx)(A,{}),(0,r.jsx)(w.LM,{className:d("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,r.jsx)(z,{})]})})}function R(e){let{className:t,children:s,...a}=e;return(0,r.jsxs)(w.q7,{"data-slot":"select-item",className:d("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...a,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(w.VF,{children:(0,r.jsx)(k.A,{className:"size-4"})})}),(0,r.jsx)(w.p4,{children:s})]})}function A(e){let{className:t,...s}=e;return(0,r.jsx)(w.PP,{"data-slot":"select-scroll-up-button",className:d("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(C.A,{className:"size-4"})})}function z(e){let{className:t,...s}=e;return(0,r.jsx)(w.wn,{"data-slot":"select-scroll-down-button",className:d("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(S.A,{className:"size-4"})})}var I=s(4616),F=s(646),W=s(9428),_=s(2525);let L=(e,t)=>e<0||e>11||!t?0:new Date(t,e+1,0).getDate(),O=e=>e<0||e>11?"":["January","February","March","April","May","June","July","August","September","October","November","December"][e]||"",G=(e,t)=>new Date(t,e,1).getDay(),T=(e,t,s)=>{let r=new Date(s,t,e).getDay();return 0===r||6===r};var U=s(6671);let B=e=>{let{schedules:t,activeScheduleId:s,onScheduleSelect:n,onScheduleAdd:l,onScheduleDelete:i}=e,[d,o]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(null),[b,j]=(0,a.useState)("auto"),y=s&&!d,w=new Date,S=w.getMonth(),k=w.getFullYear(),C=()=>{if(0===t.length)return null;let e=t[0];for(let s=1;s<t.length;s++){let r=t[s];(r.year>e.year||r.year===e.year&&r.month>e.month)&&(e=r)}return e},A=()=>{let e=C();if(!e)return{month:S,year:k};let t=new Date(e.year,e.month),s=new Date(t.getFullYear(),t.getMonth()+1);return{month:s.getMonth(),year:s.getFullYear()}},z=(e,t,s)=>{i(e),U.oR.success("Schedule deleted",{description:"".concat(O(t)," ").concat(s," schedule has been deleted.")})},L=[...t].sort((e,t)=>t.year-e.year||t.month-e.month),G=Array.from({length:10},(e,t)=>{let s=w.getFullYear()-2+t;return{value:s.toString(),label:s.toString()}});return(0,r.jsxs)(p,{children:[(0,r.jsxs)(g,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(f,{className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"w-5 h-5"}),"Schedule History",y&&s&&(0,r.jsxs)("span",{className:"text-sm font-normal text-muted-foreground",children:["-"," ",(()=>{let e=t.find(e=>e.id===s);return e?"".concat(O(e.month)," ").concat(e.year):""})()]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[y&&(0,r.jsx)(N,{variant:"ghost",size:"sm",onClick:()=>n(null),className:"flex items-center gap-2",children:"Show All"}),(0,r.jsxs)(N,{onClick:()=>{let{month:e,year:t}=A();o(!0),u(e),x(t),j("auto")},size:"sm",className:"flex items-center gap-2",children:[(0,r.jsx)(I.A,{className:"w-4 h-4"}),"Add Schedule"]})]})]}),0===t.length&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"No schedules created yet."})]}),!y&&(0,r.jsxs)(v,{className:"space-y-4",children:[d&&(0,r.jsxs)("div",{className:"p-4 border rounded-lg bg-muted/50 space-y-4",children:[(0,r.jsx)("h4",{className:"font-medium",children:"Create New Schedule"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Month"}),(0,r.jsxs)(E,{value:(null==c?void 0:c.toString())||"",onValueChange:e=>u(parseInt(e)),children:[(0,r.jsx)(M,{children:(0,r.jsx)(D,{placeholder:"Select month"})}),(0,r.jsx)(P,{children:[{value:"0",label:"January"},{value:"1",label:"February"},{value:"2",label:"March"},{value:"3",label:"April"},{value:"4",label:"May"},{value:"5",label:"June"},{value:"6",label:"July"},{value:"7",label:"August"},{value:"8",label:"September"},{value:"9",label:"October"},{value:"10",label:"November"},{value:"11",label:"December"}].map(e=>(0,r.jsx)(R,{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Year"}),(0,r.jsxs)(E,{value:(null==m?void 0:m.toString())||"",onValueChange:e=>x(parseInt(e)),children:[(0,r.jsx)(M,{children:(0,r.jsx)(D,{placeholder:"Select year"})}),(0,r.jsx)(P,{children:G.map(e=>(0,r.jsx)(R,{value:e.value,children:e.label},e.value))})]})]})]}),t.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Employee Import"}),(0,r.jsxs)(E,{value:b,onValueChange:j,children:[(0,r.jsx)(M,{children:(0,r.jsx)(D,{placeholder:"Choose import option"})}),(0,r.jsxs)(P,{children:[(0,r.jsx)(R,{value:"auto",children:"Auto-import from most recent schedule"}),(0,r.jsx)(R,{value:"none",children:"Start with empty employee list"}),L.map(e=>(0,r.jsxs)(R,{value:e.id,children:["Copy from ",O(e.month)," ",e.year," (",e.employees.length," ","employees)"]},e.id))]})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Imported employees become independent copies - changes won't affect the original schedule."})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(N,{onClick:()=>{if(!c||!m)return void U.oR.error("Invalid input",{description:"Please select both month and year."});try{let e;if("auto"===b){let t=C();e=null==t?void 0:t.id}else"none"!==b&&(e=b);l(c,m,e),o(!1),u(null),x(null),j("auto");let t=e?" with imported employees":" with empty employee list";U.oR.success("Schedule created",{description:"".concat(O(c)," ").concat(m," schedule has been created").concat(t,".")})}catch(e){U.oR.error("Creation failed",{description:e instanceof Error?e.message:"Failed to create schedule."})}},size:"sm",children:"Create Schedule"}),(0,r.jsx)(N,{variant:"outline",onClick:()=>{o(!1),u(null),x(null),j("auto")},size:"sm",children:"Cancel"})]})]}),L.length>0&&(0,r.jsx)("div",{className:"space-y-2",children:L.map(e=>(0,r.jsxs)("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors ".concat(e.id===s?"bg-primary/10 border-primary":"hover:bg-muted/50"),onClick:()=>{e.id===s?n(null):n(e.id)},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.isGenerated?(0,r.jsx)(F.A,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(W.A,{className:"w-4 h-4 text-muted-foreground"}),(0,r.jsxs)("span",{className:"font-medium",children:[O(e.month)," ",e.year]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.employees.length," employees"]}),(0,r.jsx)(N,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),z(e.id,e.month,e.year)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive hover:bg-destructive/10",children:(0,r.jsx)(_.A,{className:"w-3 h-3"})})]})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",e.createdAt.toLocaleDateString(),e.isGenerated&&(0,r.jsx)("span",{className:"ml-2 text-green-600",children:"• Generated"})]})]},e.id))})]})]})};function V(e){let{className:t,type:s,...a}=e;return(0,r.jsx)("input",{type:s,"data-slot":"input",className:d("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}var q=s(968);function J(e){let{className:t,...s}=e;return(0,r.jsx)(q.b,{"data-slot":"label",className:d("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}let Y=(0,j.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function X(e){let{className:t,variant:s,asChild:a=!1,...n}=e,l=a?b.DX:"span";return(0,r.jsx)(l,{"data-slot":"badge",className:d(Y({variant:s}),t),...n})}let H=e=>{let{employees:t,selectedEmployee:s,onEmployeeSelect:n,onAddEmployee:l,onRemoveEmployee:i,onUpdateEmployee:d,onToggleTag:o,predefinedTags:c,hasActiveSchedule:u}=e,[m,h]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[j,y]=(0,a.useState)(0),w=e=>{h(e.id),b(e.name),y(e.shiftsPerMonth)},S=()=>{d(m,{name:x,shiftsPerMonth:j}),h("")},k=()=>{h(""),b(""),y(0)};return(0,r.jsxs)(p,{className:"flex flex-col h-[600px]",children:[(0,r.jsxs)(g,{className:"flex-shrink-0",children:[(0,r.jsx)(f,{children:"Manage Employees"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:u?"Click an employee to select and edit, then click calendar days to set preferences":"Select a schedule from the history above to manage employees"})]}),(0,r.jsx)(v,{className:"flex-1 flex flex-col overflow-hidden",children:u?0===t.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"No employees added yet."}),(0,r.jsxs)(N,{onClick:l,children:[(0,r.jsx)(I.A,{className:"w-4 h-4 mr-2"}),"Add First Employee"]})]}):(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,r.jsx)("div",{className:"flex-1 space-y-3 overflow-y-auto pr-2",children:t.map(e=>(0,r.jsx)("div",{className:"border rounded-lg transition-colors ".concat(s===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:m===e.id?(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{htmlFor:"editName",children:"Name"}),(0,r.jsx)(V,{id:"editName",value:x,onChange:e=>b(e.target.value),placeholder:"Employee name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{htmlFor:"editShifts",children:"Shifts per Month"}),(0,r.jsx)(V,{id:"editShifts",type:"number",min:"1",max:"31",value:j,onChange:e=>y(Number.parseInt(e.target.value)||0)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{children:"Tags"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:c.map(t=>{let s=e.tags.includes(t);return(0,r.jsx)(N,{variant:s?"default":"outline",size:"sm",onClick:()=>o(e.id,t),children:t},t)})})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(N,{onClick:S,size:"sm",children:"Save"}),(0,r.jsx)(N,{onClick:k,variant:"outline",size:"sm",children:"Cancel"}),(0,r.jsxs)(N,{onClick:()=>{i(e.id),h("")},variant:"destructive",size:"sm",children:[(0,r.jsx)(_.A,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}):(0,r.jsx)("div",{className:"p-3 cursor-pointer",onClick:()=>n(s===e.id?"":e.id),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium",children:e.name}),(0,r.jsxs)(X,{variant:"secondary",children:[e.shiftsPerMonth," shifts"]})]}),e.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.tags.map(e=>(0,r.jsx)(X,{variant:"outline",className:"text-xs",children:e},e))}),s===e.id&&(0,r.jsx)("div",{className:"mt-2 text-xs text-blue-600",children:"✓ Selected - Click calendar days to set preferences"})]}),(0,r.jsx)(N,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),w(e)},children:"Edit"})]})})},e.id))}),u&&(0,r.jsxs)(N,{onClick:l,variant:"outline",className:"w-full mt-3 flex-shrink-0",children:[(0,r.jsx)(I.A,{className:"w-4 h-4 mr-2"}),"Add Employee"]})]}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"No active schedule selected. Please select a schedule from the history above or create a new one."})})})]})},Q=e=>{let{settings:t,onSettingsChange:s}=e,a=(e,r)=>{s({...t,[e]:r})};return(0,r.jsxs)(p,{children:[(0,r.jsxs)(g,{children:[(0,r.jsx)(f,{children:"Global Scheduling Constraints"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure global rules that apply to the entire schedule generation process"})]}),(0,r.jsxs)(v,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(J,{htmlFor:"shiftsPerDay",children:"Shifts per Day"}),(0,r.jsx)(V,{id:"shiftsPerDay",type:"number",min:"1",max:"3",value:t.shiftsPerDay,onChange:e=>a("shiftsPerDay",Number.parseInt(e.target.value)||1)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Number of shifts each day (e.g., morning, evening)"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(J,{htmlFor:"personsPerShift",children:"Persons per Shift"}),(0,r.jsx)(V,{id:"personsPerShift",type:"number",min:"1",max:"10",value:t.personsPerShift,onChange:e=>a("personsPerShift",Number.parseInt(e.target.value)||1)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Number of people needed for each shift"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(J,{htmlFor:"maxConsecutive",children:"Max Consecutive Shifts"}),(0,r.jsx)(V,{id:"maxConsecutive",type:"number",min:"1",max:"7",value:t.maxConsecutiveShifts,onChange:e=>a("maxConsecutiveShifts",Number.parseInt(e.target.value)||1)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Maximum shifts an employee can work in a row"})]})]}),(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Rest and Recovery"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(J,{htmlFor:"minRestDays",children:"Minimum Rest Days Between Shifts"}),(0,r.jsx)(V,{id:"minRestDays",type:"number",min:"0",max:"3",value:t.minRestDaysBetweenShifts,onChange:e=>a("minRestDaysBetweenShifts",Number.parseInt(e.target.value)||0)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Minimum days off required between shift assignments"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(J,{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:t.weekendCoverageRequired,onChange:e=>a("weekendCoverageRequired",e.target.checked),className:"rounded"}),"Weekend Coverage Required"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ensure shifts are covered on weekends (Saturday & Sunday)"})]})]})]}),(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Weekly Limits"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(J,{htmlFor:"minShiftsPerWeek",children:"Minimum Shifts per Week"}),(0,r.jsx)(V,{id:"minShiftsPerWeek",type:"number",min:"0",max:"7",value:t.minShiftsPerWeek,onChange:e=>a("minShiftsPerWeek",Number.parseInt(e.target.value)||0)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Minimum shifts each employee should work per week"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(J,{htmlFor:"maxShiftsPerWeek",children:"Maximum Shifts per Week"}),(0,r.jsx)(V,{id:"maxShiftsPerWeek",type:"number",min:"1",max:"7",value:t.maxShiftsPerWeek,onChange:e=>a("maxShiftsPerWeek",Number.parseInt(e.target.value)||1)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Maximum shifts each employee can work per week"})]})]})]}),(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Fairness and Distribution"}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(J,{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:t.evenDistribution,onChange:e=>a("evenDistribution",e.target.checked),className:"rounded"}),"Even Shift Distribution"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Attempt to distribute shifts evenly among all employees to ensure fairness"})]})})]}),(0,r.jsxs)("div",{className:"border-t pt-6 bg-muted/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Constraint Summary"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Daily:"})," ",t.shiftsPerDay," shift(s),"," ",t.personsPerShift," person(s) each"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Consecutive:"})," Max"," ",t.maxConsecutiveShifts," shifts in a row"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Rest:"})," ",t.minRestDaysBetweenShifts," ","day(s) minimum between shifts"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Weekly:"})," ",t.minShiftsPerWeek,"-",t.maxShiftsPerWeek," shifts per person"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Weekend:"})," ",t.weekendCoverageRequired?"Required":"Optional"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Distribution:"})," ",t.evenDistribution?"Even":"Flexible"]})]})]})]})]})]})};var Z=s(4261),$=s(2118);let K=(e,t,s,r)=>{let a=L(s,r),n="Date,Employee\n";for(let l=1;l<=a;l++){let a=e[l]||[];a.length>0?a.forEach(e=>{let a=t.find(t=>t.id===e);n+="".concat(r,"-").concat((s+1).toString().padStart(2,"0"),"-").concat(l.toString().padStart(2,"0"),",").concat((null==a?void 0:a.name)||"Unknown","\n")}):n+="".concat(r,"-").concat((s+1).toString().padStart(2,"0"),"-").concat(l.toString().padStart(2,"0"),",No Assignment\n")}let l=new Blob([n],{type:"text/csv"}),i=window.URL.createObjectURL(l),d=document.createElement("a");d.href=i,d.download="schedule-".concat(O(s),"-").concat(r,".csv"),d.click(),window.URL.revokeObjectURL(i)},ee=(e,t,s,r)=>{let a=document.createElement("canvas"),n=a.getContext("2d");if(!n)return;let l=L(s,r);a.width=840,a.height=60+40*Math.ceil(l/7),n.fillStyle="#ffffff",n.fillRect(0,0,a.width,a.height),n.fillStyle="#000000",n.font="bold 24px Arial",n.textAlign="center",n.fillText("".concat(O(s)," ").concat(r," Schedule"),a.width/2,30),n.font="14px Arial",n.textAlign="left";for(let s=1;s<=l;s++){let r=Math.floor((s-1)/7),a=(s-1)%7*120,l=60+40*r;n.strokeStyle="#cccccc",n.strokeRect(a,l,120,40),n.fillStyle="#000000",n.fillText(s.toString(),a+5,l+20);let i=e[s]||[];if(i.length>0){let e=t.find(e=>e.id===i[0]);n.fillStyle="#0066cc",n.fillText((null==e?void 0:e.name)||"Unknown",a+5,l+35)}}a.toBlob(e=>{if(e){let t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="schedule-".concat(O(s),"-").concat(r,".png"),a.click(),window.URL.revokeObjectURL(t)}})},et=e=>{var t;let{schedule:s,employees:n,selectedMonth:l,selectedYear:i,hasActiveSchedule:d,constraints:o=[],selectedEmployee:c,onSetConstraint:u,onRemoveConstraint:m,onGenerateSchedule:h,isGenerating:x=!1}=e,[b,j]=(0,a.useState)(!1),y=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{y.current&&!y.current.contains(e.target)&&j(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let w=e=>{if(!c||!u||!m)return;let t=o.find(t=>t.employeeId===c&&t.date===e);t?"prefer"===t.type?u(c,"avoid",e):"avoid"===t.type&&m(c,e):u(c,"prefer",e)};return(0,r.jsxs)(p,{children:[(0,r.jsxs)(g,{children:[(0,r.jsxs)(f,{className:"flex items-center justify-between",children:["Schedule & Preferences",(0,r.jsxs)("div",{className:"flex gap-2",children:[h&&(0,r.jsx)(N,{onClick:h,disabled:0===n.length||x,size:"sm",children:x?"Generating...":"Generate Schedule"}),Object.keys(s).length>0&&(0,r.jsxs)("div",{className:"relative",ref:y,children:[(0,r.jsxs)(N,{variant:"outline",size:"sm",onClick:()=>j(!b),className:"flex items-center gap-2",children:["Export",(0,r.jsx)(S.A,{className:"w-4 h-4"})]}),b&&(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:[(0,r.jsxs)("button",{onClick:()=>{if(0===Object.keys(s).length)return void U.oR.error("No schedule",{description:"Please generate a schedule first."});try{K(s,n,l,i),U.oR.success("CSV exported",{description:"Schedule has been exported as CSV file."})}catch(e){U.oR.error("Export failed",{description:"Failed to export CSV file."})}j(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(Z.A,{className:"w-4 h-4"}),"Export as CSV"]}),(0,r.jsxs)("button",{onClick:()=>{if(0===Object.keys(s).length)return void U.oR.error("No schedule",{description:"Please generate a schedule first."});try{ee(s,n,l,i),U.oR.success("Image exported",{description:"Schedule has been exported as PNG image."})}catch(e){U.oR.error("Export failed",{description:"Failed to export image file."})}j(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)($.A,{className:"w-4 h-4"}),"Export as Image"]})]})]})]})]}),c&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Setting preferences for:"," ",(0,r.jsx)("strong",{children:null==(t=n.find(e=>e.id===c))?void 0:t.name})]})]}),(0,r.jsxs)(v,{children:[!d&&(0,r.jsx)("p",{className:"text-muted-foreground",children:"No active schedule selected. Please select a schedule from the schedule history above to view its generated schedule."}),d&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-medium mb-4",children:[O(l)," ",i," Schedule"]}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,r.jsx)("div",{className:"p-2 text-center font-medium bg-muted rounded",children:e},e)),(()=>{if(!l||!i)return null;let e=G(l,i),t=L(l,i),a=[];for(let t=0;t<e;t++)a.push((0,r.jsx)("div",{className:"p-2 h-16"},"empty-".concat(t)));for(let e=1;e<=t;e++){let t=s[e]||[],l=c?o.find(t=>t.employeeId===c&&t.date===e):null,i="p-2 h-16 border rounded-lg ";c&&(i+="cursor-pointer transition-colors ",(null==l?void 0:l.type)==="prefer"?i+="bg-green-100 border-green-300 hover:bg-green-200":(null==l?void 0:l.type)==="avoid"?i+="bg-red-100 border-red-300 hover:bg-red-200":i+="hover:border-blue-300 hover:bg-blue-50"),a.push((0,r.jsxs)("div",{className:i,onClick:()=>c&&w(e),children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:e}),t.map(e=>{let t=n.find(t=>t.id===e);return(0,r.jsx)("div",{className:"text-xs text-blue-600 truncate",title:null==t?void 0:t.name,children:null==t?void 0:t.name},e)})]},e))}return a})()]}),c&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-blue-800 mb-2",children:"Click on days to set preferences:"}),(0,r.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded"}),(0,r.jsx)("span",{children:"Preferred days (✓)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-red-100 border border-red-300 rounded"}),(0,r.jsx)("span",{children:"Avoid days (✗)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-white border border-gray-300 rounded"}),(0,r.jsx)("span",{children:"Normal days"})]})]})]})]})]})]})},es={shiftsPerDay:1,personsPerShift:1,maxConsecutiveShifts:3,minRestDaysBetweenShifts:0,weekendCoverageRequired:!0,maxShiftsPerWeek:5,minShiftsPerWeek:1,evenDistribution:!0},er=()=>{let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(null),[n,l]=(0,a.useState)(es);(0,a.useEffect)(()=>{d()},[]);let i=(0,a.useCallback)(()=>{localStorage.setItem("scheduleData",JSON.stringify({schedules:e,activeScheduleId:s,settings:n}))},[e,s,n]);(0,a.useEffect)(()=>{i()},[i]);let d=()=>{let e=localStorage.getItem("scheduleData");if(e)try{let s=JSON.parse(e);t((s.schedules||[]).map(e=>({...e,createdAt:new Date(e.createdAt)}))),r(s.activeScheduleId||null),l({...es,...s.settings})}catch(e){console.error("Error loading from localStorage:",e)}},o=(e,s)=>{t(t=>t.map(t=>t.id===e?{...t,...s}:t))},c=()=>e.find(e=>e.id===s)||null,u=c(),m=(null==u?void 0:u.month)||0,h=(null==u?void 0:u.year)||0,x=(null==u?void 0:u.employees)||[],p=(null==u?void 0:u.constraints)||[];return{schedules:e,activeScheduleId:s,setActiveScheduleId:r,addSchedule:(s,a,n)=>{if(e.some(e=>e.month===s&&e.year===a))throw Error("Schedule for ".concat(s,"/").concat(a," already exists"));let l=[];if(n){let t=e.find(e=>e.id===n);t&&t.employees.length>0&&(l=t.employees.map(e=>({...e,id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,11))})))}let i={id:Date.now().toString(),month:s,year:a,employees:l,constraints:[],schedule:{},createdAt:new Date,isGenerated:!1};return t(e=>[...e,i]),r(i.id),i.id},deleteSchedule:e=>{t(t=>t.filter(t=>t.id!==e)),s===e&&r(null)},updateSchedule:o,getActiveSchedule:c,selectedMonth:m,selectedYear:h,employees:x,setEmployees:e=>{s&&o(s,{employees:e})},constraints:p,setConstraints:e=>{s&&o(s,{constraints:e})},schedule:(null==u?void 0:u.schedule)||{},setSchedule:e=>{s&&o(s,{schedule:e,isGenerated:Object.keys(e).length>0})},settings:n,setSettings:l}},ea=(e,t,s,r,a,n)=>({addEmployee:()=>{let s=e.filter(e=>e.name.startsWith("New Employee ")).map(e=>{let t=e.name.match(/New Employee (\d+)/);return t?Number.parseInt(t[1]):0}),r=(s.length>0?Math.max(...s)+1:1).toString().padStart(3,"0"),a={id:Date.now().toString(),name:"New Employee ".concat(r),shiftsPerMonth:8,tags:[]};t([...e,a]),U.oR.success("Employee added",{description:"".concat(a.name," has been added to the schedule.")})},removeEmployee:l=>{t(e.filter(e=>e.id!==l)),r(s.filter(e=>e.employeeId!==l));let i={...a};Object.keys(i).forEach(e=>{i[Number.parseInt(e)]=i[Number.parseInt(e)].filter(e=>e!==l)}),n(i)},updateEmployee:(s,r)=>{t(e.map(e=>e.id===s?{...e,...r}:e)),U.oR.success("Employee updated",{description:"Employee information has been saved."})},toggleEmployeeTag:(s,r)=>{t(e.map(e=>{if(e.id===s){let t=e.tags.includes(r);return{...e,tags:t?e.tags.filter(e=>e!==r):[...e.tags,r]}}return e}))}}),en=(e,t)=>({getConstraintsForEmployee:t=>e.filter(e=>e.employeeId===t),getConstraintForDate:(t,s)=>e.find(e=>e.employeeId===t&&e.date===s),removeConstraint:(s,r)=>{t(e.filter(e=>e.employeeId!==s||e.date!==r))},setConstraint:(s,r,a)=>{t([...e.filter(e=>e.employeeId!==s||e.date!==a),{id:Date.now().toString(),employeeId:s,type:r,date:a}])}});var el=s(2764),ei=s.n(el);let ed=e=>Math.floor(Math.random()*e),eo=(e,t,s,r)=>{let{shiftsPerDay:a,personsPerShift:n}=s;if(e.length<r*a*n)throw Error("Not enough slots in optimized schedule");let l={},i=0;for(let s=1;s<=r;s++){l[s]=[];for(let r=0;r<a;r++)for(let r=0;r<n;r++){let r=e[i];if(r>=0&&r<t.length)l[s].push(t[r].id),i++;else throw Error("Invalid employee index ".concat(r," in optimized schedule"))}}return l},ec=e=>{let t=[];e.forEach((e,s)=>{for(let r=0;r<e.shiftsPerMonth;r++)t.push(s)});for(let e=t.length-1;e>0;e--){let s=ed(e+1);[t[e],t[s]]=[t[s],t[e]]}return t},eu=(e,t,s,r,a,n,l)=>{let i=0,{shiftsPerDay:d,personsPerShift:o}=r,c=Array(t.length).fill(0),u=t.map(()=>({current:0,max:0})),m=e.slice(0,a*d*o);for(let e=0;e<a;e++){let a=e+1,h=[],x=e*d*o,p=Math.min((e+1)*d*o,m.length);for(let e=x;e<p;e++){let s=m[e];s>=0&&s<t.length&&h.push(s)}for(let s=0;s<d;s++){let r=e*d*o+s*o,a=Math.min(r+o,m.length),n=new Set;for(let e=r;e<a;e++){let s=m[e];s>=0&&s<t.length&&n.add(s)}n.size<o&&(i+=2e3)}let g=d*o,f=T(a,n,l);h.length<g&&(i+=(g-h.length)*1e3),s.forEach(e=>{if("avoid"===e.type&&e.date===a){let s=t.findIndex(t=>t.id===e.employeeId);-1!==s&&h.includes(s)&&(i+=1e3)}}),s.forEach(e=>{if("prefer"===e.type&&e.date===a){let s=t.findIndex(t=>t.id===e.employeeId);-1===s||h.includes(s)||(i+=10)}}),f&&r.weekendCoverageRequired&&0===h.filter(e=>{var s;return null==(s=t[e])?void 0:s.tags.includes("Weekend type")}).length&&h.length>0&&(i+=20);let v=[...new Set(h)];v.forEach(t=>{if(c[t]++,e>0){let s=(e-1)*d*o,r=e*d*o,a=!1;for(let e=s;e<Math.min(r,m.length);e++)if(m[e]===t){a=!0;break}a?u[t].current++:u[t].current=1}else u[t].current=1;u[t].max=Math.max(u[t].max,u[t].current)}),t.forEach((e,t)=>{v.includes(t)||(u[t].current=0)})}t.forEach((e,t)=>{if(u[t].max>r.maxConsecutiveShifts){let e=u[t].max-r.maxConsecutiveShifts;i+=100*e}});for(let e=0;e<Math.ceil(a/7);e++){let s=7*e,n=Math.min(s+6,a-1);t.forEach((e,t)=>{let a=0,l=[];for(let e=s;e<=n;e++){let s=e*d*o,r=Math.min((e+1)*d*o,m.length),n=!1;for(let e=s;e<r;e++)if(m[e]===t){n=!0;break}n&&(a++,l.push(e))}a>r.maxShiftsPerWeek&&(i+=(a-r.maxShiftsPerWeek)*100);for(let e=0;e<l.length-1;e++){let t=l[e+1]-l[e]-1;t<r.minRestDaysBetweenShifts&&(i+=(r.minRestDaysBetweenShifts-t)*80)}})}if(r.evenDistribution){let e=c.reduce((e,t)=>e+t,0)/c.length,t=c.reduce((t,s)=>t+Math.pow(s-e,2),0)/c.length;i+=50*t}return i},em=e=>{let t=[...e];if(t.length<2)return t;let s=["swap","move","reverse","transport"],r=s[ed(s.length)],a=ed(t.length),n=ed(t.length);switch(r){case"swap":[t[a],t[n]]=[t[n],t[a]];break;case"move":{let e=t.splice(a,1)[0];t.splice(n,0,e);break}case"reverse":{let e=Math.min(a,n),s=Math.max(a,n);for(;e<s;)[t[e],t[s]]=[t[s],t[e]],e++,s--;break}case"transport":{if(t.length<3)break;let e=Math.min(a,n),s=Math.max(a,n);if(e<s){let r=t.splice(e,s-e+1),a=ed(t.length);t.splice(a,0,...r)}}}return t},eh=(e,t,s,r,a)=>{if(0===e.length)return{schedule:{},success:!1,message:"Please add employees before generating a schedule."};let n=L(r,a),l=n*s.shiftsPerDay*s.personsPerShift,i=e.reduce((e,t)=>e+t.shiftsPerMonth,0);if(i<l)return{schedule:{},success:!1,message:"Need ".concat(l," total shifts, but only ").concat(i," available.")};let d=ec(e);try{console.log("Starting optimized simulated annealing with ".concat(e.length," employees, ").concat(n," days"));let l=Date.now(),i=ei()({initialState:d,tempMax:1e3,tempMin:.1,newState:e=>em(e),getTemp:e=>.95*e,getEnergy:l=>eu(l,e,t,s,n,r,a)}),o=Date.now();console.log("Simulated annealing completed in ".concat(o-l,"ms"));let c=eo(i,e,s,n),u=eu(i,e,t,s,n,r,a),m=0===u?"Perfect schedule generated with all constraints satisfied!":"Schedule generated with optimization score: ".concat(Math.round(Math.max(0,1e3-u)),"/1000");return{schedule:c,success:!0,message:m}}catch(e){return console.error("Simulated annealing failed:",e),{schedule:{},success:!1,message:"Simulated annealing failed."}}},ex=()=>{let[e,t]=(0,a.useState)(!1);return{isGenerating:e,handleGenerateSchedule:async(e,s,r,a,n,l)=>{t(!0);try{await new Promise(e=>setTimeout(e,500));let t=eh(e,s,r,a,n);t.success?(l(t.schedule),U.oR.success("Schedule generated",{description:t.message})):U.oR.error("Generation failed",{description:t.message})}catch(e){U.oR.error("Generation error",{description:"An unexpected error occurred while generating the schedule."})}finally{t(!1)}}}},ep=["Weekend type","Burger","Morning shift","Evening shift","Manager","Part-time"];function eg(){let{schedules:e,activeScheduleId:t,setActiveScheduleId:s,addSchedule:n,deleteSchedule:l,selectedMonth:i,selectedYear:d,employees:p,setEmployees:g,constraints:f,setConstraints:v,schedule:b,setSchedule:j,settings:y,setSettings:N}=er(),{addEmployee:w,removeEmployee:S,updateEmployee:k,toggleEmployeeTag:C}=ea(p,g,f,v,b,j),{setConstraint:E,removeConstraint:D}=en(f,v),{isGenerating:M,handleGenerateSchedule:P}=ex(),[R,A]=(0,a.useState)("");return(0,r.jsxs)("div",{className:"container mx-auto p-6 max-w-6xl",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Schedule Manager"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage employee schedules with constraints and preferences"})]}),(0,r.jsxs)(o,{defaultValue:"setup",className:"space-y-6",children:[(0,r.jsxs)(c,{className:"grid w-full grid-cols-2",children:[(0,r.jsxs)(u,{value:"setup",className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"w-4 h-4"}),"Setup"]}),(0,r.jsxs)(u,{value:"constraints",className:"flex items-center gap-2",children:[(0,r.jsx)(x.A,{className:"w-4 h-4"}),"Constraints"]})]}),(0,r.jsx)(m,{value:"setup",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(B,{schedules:e,activeScheduleId:t,onScheduleSelect:s,onScheduleAdd:n,onScheduleDelete:l}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[(0,r.jsx)(H,{employees:p,selectedEmployee:R,onEmployeeSelect:A,onAddEmployee:w,onRemoveEmployee:S,onUpdateEmployee:k,onToggleTag:C,predefinedTags:ep,hasActiveSchedule:null!==t}),(0,r.jsx)("div",{className:"xl:col-span-2",children:(0,r.jsx)(et,{schedule:b,employees:p,selectedMonth:i,selectedYear:d,hasActiveSchedule:null!==t,constraints:f,selectedEmployee:R,onSetConstraint:E,onRemoveConstraint:D,onGenerateSchedule:()=>{P(p,f,y,i,d,j)},isGenerating:M})})]})]})}),(0,r.jsx)(m,{value:"constraints",children:(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)(Q,{settings:y,onSettingsChange:N})})})]})]})}},9848:(e,t,s)=>{Promise.resolve().then(s.bind(s,8349))}},e=>{var t=t=>e(e.s=t);e.O(0,[671,369,441,684,358],()=>t(9848)),_N_E=e.O()}]);